<%- include('../Partials/header') %>

<main class="container mt-4">
    <h1>Update Equipment</h1>

    <form action="/equipment/update/<%= equipment._id %>" method="POST">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" class="form-control" id="name" name="name" value="<%= equipment.name %>" required>
        </div>
        
        <div class="form-group">
            <label for="category">Category:</label>
            <input type="text" class="form-control" id="category" name="category" value="<%= equipment.category %>" required>
        </div>

        <div class="form-group">
            <label for="status">Status:</label>
            <select class="form-control" id="status" name="status" required>
                <option value="Available" <%= equipment.status === 'Available' ? 'selected' : '' %>>Available</option>
                <option value="Assigned" <%= equipment.status === 'Assigned' ? 'selected' : '' %>>Assigned</option>
                <option value="Needs Repair" <%= equipment.status === 'Needs Repair' ? 'selected' : '' %>>Needs Repair</option>
            </select>
        </div>

        <div class="form-group">
            <label for="assignTo">Assign To:</label>
            <select class="form-control" id="assignTo" name="assignTo">
                <option value="">Select Engineer</option>
                <% engineers.forEach((engineer) => { %>
                    <option value="<%= engineer._id %>" <%= equipment.assignedTo && equipment.assignedTo.toString() === engineer._id.toString() ? 'selected' : '' %>><%= engineer.username %></option>
                <% }); %>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Update Equipment</button>
    </form>

    <a href="/equipment" class="btn btn-secondary mt-4">Back to Equipment List</a>
</main>

<%- include('../Partials/footer') %>
